<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!-- saved from url=(0061)http://symfony.com/legacy/doc/forms/1_1/en/02-Form-Validation -->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <!--[if lt IE 9]>
            <meta http-equiv="X-UA-Compatible" content="IE=EmulateIE7" />
        <![endif]-->
        <script type="text/javascript" async="" src="./Chapter 2 - Form Validation (1_1) - Symfony_files/ld.js"></script><script src="./Chapter 2 - Form Validation (1_1) - Symfony_files/sln_customiser.js" id="sln-customize"></script><script type="text/javascript" async="" src="./Chapter 2 - Form Validation (1_1) - Symfony_files/dc.js"></script><script src="./Chapter 2 - Form Validation (1_1) - Symfony_files/sln.js" id="sln_bar"></script><script async="true" type="text/javascript" src="./Chapter 2 - Form Validation (1_1) - Symfony_files/event" data-owner="criteo-tag"></script><script type="text/javascript" async="" src="./Chapter 2 - Form Validation (1_1) - Symfony_files/ga.js"></script><script type="text/javascript">window.NREUM||(NREUM={}),__nr_require=function(t,n,e){function r(e){if(!n[e]){var o=n[e]={exports:{}};t[e][0].call(o.exports,function(n){var o=t[e][1][n];return r(o?o:n)},o,o.exports)}return n[e].exports}if("function"==typeof __nr_require)return __nr_require;for(var o=0;o<e.length;o++)r(e[o]);return r}({QJf3ax:[function(t,n){function e(t){function n(n,e,o){t&&t(n,e,o),o||(o={});for(var a=i(n),u=a.length,c=o[r]||(o[r]={}),f=0;u>f;f++)a[f].apply(c,e);return c}function o(t,n){u[t]=i(t).concat(n)}function i(t){return u[t]||[]}function a(){return e(n)}var u={};return{on:o,emit:n,create:a,listeners:i,_events:u}}var r="nr@context";n.exports=e()},{}],ee:[function(t,n){n.exports=t("QJf3ax")},{}],D5DuLP:[function(t,n){function e(t,n,e){return r.listeners(t).length?r.emit(t,n,e):(o[t]||(o[t]=[]),void o[t].push(n))}var r=t("ee").create(),o={};n.exports=e,e.ee=r,r.q=o},{ee:"QJf3ax"}],handle:[function(t,n){n.exports=t("D5DuLP")},{}],loader:[function(t,n){n.exports=t("G9z0Bl")},{}],G9z0Bl:[function(t,n){function e(){var t=l.info=NREUM.info;if(t&&t.agent&&t.licenseKey&&t.applicationID&&c&&c.body){l.proto="https"===p.split(":")[0]||t.sslForHttp?"https://":"http://",a("mark",["onload",i()]);var n=c.createElement("script");n.src=l.proto+t.agent,c.body.appendChild(n)}}function r(){"complete"===c.readyState&&o()}function o(){a("mark",["domContent",i()])}function i(){return(new Date).getTime()}var a=t("handle"),u=window,c=u.document,f="addEventListener",s="attachEvent",p=(""+location).split("?")[0],l=n.exports={offset:i(),origin:p,features:{}};c[f]?(c[f]("DOMContentLoaded",o,!1),u[f]("load",e,!1)):(c[s]("onreadystatechange",r),u[s]("onload",e)),a("mark",["firstbyte",i()])},{handle:"D5DuLP"}]},{},["G9z0Bl"]);</script>
        <meta name="robots" content="index, follow, all">
        <meta name="Author" content="Extreme Sensio">
        <meta name="Language" content="en">
        <meta name="Copyright" content="Sensio Labs">
        <meta name="Publisher" content="Sensio Labs">
        <meta name="Description" content="Symfony - Open-Source PHP web framework">
        <meta name="Keywords" content="symfony2, symfony, project, framework, php, php5, open-source, components, symphony, symfony framework, symfony tutorial">

        <link rel="search" type="application/opensearchdescription+xml" href="http://symfony.com/opensearch/documentation.xml" title="Symfony2 documentation">

        <link rel="stylesheet" href="https://connect.sensiolabs.com/css/sln.css"><title>            Chapter 2 - Form Validation
        (1_1)
 - Symfony</title>

                        <link rel="stylesheet" href="http://symfony.com/css/compiled/all.css?v=4">
         
        <!--[if lte IE 7]>
            <link rel="stylesheet" href="/css/common/ltie7.css" />
        <![endif]-->

            <link rel="stylesheet" type="text/css" media="all" href="./Chapter 2 - Form Validation (1_1) - Symfony_files/highlight.css">
    <link rel="stylesheet" type="text/css" media="all" href="./Chapter 2 - Form Validation (1_1) - Symfony_files/legacy.css">

                    <script type="text/javascript" src="./Chapter 2 - Form Validation (1_1) - Symfony_files/all.js"></script>
        
        <!--[if lt IE 9]>
          <script src="/js/common/html5.js" type="text/javascript"></script>
        <![endif]-->

        <!--[if IE 6]>
            <script src="/js/common/DD_belatedPNG_0.0.7a-min.js" type="text/javascript"></script>
            <script src="/js/common/ExtendDD_belatedPNG_0.0.7a.js" type="text/javascript"></script>
            <script type="text/javascript">
                DD_belatedPNG.fix('.png_fix');
            </script>
        <![endif]-->

        <script type="text/javascript">
          var _gaq = _gaq || [];
          _gaq.push(['_setAccount', 'UA-89393-6']);
          _gaq.push(['_trackPageview']);

          (function() {
            var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
            ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
            var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
          })();
        </script>

                
    </head>

    <body>
        <div id="content_wrapper" class="">
            <div id="sln"><div class="sln-bar"><div class="sln-bar-inner"><div class="sln-network"><a href="http://symfony.com/legacy/doc/forms/1_1/en/02-Form-Validation#" class="sln-hidden-phone">SensioLabs<span>Network</span></a><a href="http://symfony.com/legacy/doc/forms/1_1/en/02-Form-Validation#" class="sln-visible-phone">SL<span>N</span></a></div> <div class="sln-ad"><a href="https://insight.sensiolabs.com/" data-ga="sl_insight" class="sln-visible-phone"><img src="./Chapter 2 - Form Validation (1_1) - Symfony_files/53c7ef18b163f.png">SensioLabsInsight</a><a href="https://insight.sensiolabs.com/" data-ga="sl_insight" class="sln-visible-tablet"><img src="./Chapter 2 - Form Validation (1_1) - Symfony_files/53c7ef18b163f.png">SensioLabsInsight: regain control of your PHP applications</a><a href="https://insight.sensiolabs.com/" data-ga="sl_insight" class="sln-visible-desktop"><img src="./Chapter 2 - Form Validation (1_1) - Symfony_files/53c7ef18b163f.png">SensioLabsInsight: more than 100 quality checks to regain control of your PHP applications</a></div> <div class="sln-search"><div class="sln-search-deactivated"><a href="http://symfony.com/legacy/doc/forms/1_1/en/02-Form-Validation#"><img src="./Chapter 2 - Form Validation (1_1) - Symfony_files/search.png"></a></div><div class="sln-search-activated sln-hidden"><a href="http://symfony.com/legacy/doc/forms/1_1/en/02-Form-Validation#"><img src="./Chapter 2 - Form Validation (1_1) - Symfony_files/search-alt.png"></a><form method="GET" action="http://symfony.com/search"><input name="q" id="sln-autocomplete" type="text" placeholder="Search" class="ui-autocomplete-input" autocomplete="off" role="textbox" aria-autocomplete="list" aria-haspopup="true"></form></div></div> <div class="sln-user"> <a href="http://symfony.com/session/new?target=http://symfony.com/legacy/doc/forms/1_1/en/02-Form-Validation" class="sln-connect"> Connect </a> </div>
    </div>
    <div class="sln-dropdown-network sln-dropdown sln-hidden"><div class="sln-container"><div class="sln-row"><div class="sln-span6"><div class="sln-row"><div class="sln-span3"><img src="./Chapter 2 - Form Validation (1_1) - Symfony_files/sensiolabs.png" alt="SensioLabs"><p>Since 1998, SensioLabs has been promoting the Open-Source software movement by providing quality and performant web application development products, trainings,  and consulting. SensioLabs also supports multiple important Open-Source projects. <br><a data-ga="sln_learn_more" href="http://sensiolabs.com/en">Learn more</a></p><div><a data-ga="sln_sl_international" href="http://sensiolabs.com/en">International</a></div><ul class="sln-websites"><li>Local:</li><li class="first"><a data-ga="sln_sl_FR" href="http://sensiolabs.com/fr">France</a></li><li><a data-ga="sln_sl_DE" href="http://sensiolabs.de/">Deutschland</a></li><li><a data-ga="sln_sl_UK" href="http://sensiolabs.co.uk/">UK</a></li></ul></div><div class="sln-span3 sln-ads"><h2>In the Spotlight</h2><div><a data-ga="sln_insight_thumb" href="https://insight.sensiolabs.com/"><img src="./Chapter 2 - Form Validation (1_1) - Symfony_files/sensiolabsinsight.png" alt=""></a></div><div><a data-ga="sln_nyc2014_thumb" href="http://newyork2014.live.symfony.com/"><img src="./Chapter 2 - Form Validation (1_1) - Symfony_files/sflive-newyork2014.png" alt=""></a></div></div></div></div><div class="sln-span6 sln-products-listing"><div class="sln-row"><div class="sln-span3"><h2>Open Source</h2><ul><li><a data-ga="sln_sf" href="http://symfony.com/">Symfony - Web framework</a></li><li><a data-ga="sln_twig" href="http://twig.sensiolabs.org/">Twig - Templating</a></li><li><a data-ga="sln_silex" href="http://silex.sensiolabs.org/">Silex - Micro-framework</a></li><li><a data-ga="sln_swift" href="http://www.swiftmailer.org/">Swift Mailer - E-Mailing</a></li></ul></div><div class="sln-span3"><h2>Products</h2><ul><li><a data-ga="sln_insight" href="https://insight.sensiolabs.com/">Insight: PHP Quality</a></li><li><a data-ga="sln_profiler" href="https://profiler.sensiolabs.com/">Profiler(beta): Performance Audit</a></li><li><a data-ga="sln_security_checker" href="https://security.sensiolabs.org/">Security checker</a></li><li><a data-ga="sln_desktop" href="http://desktop.sensiolabs.org/">Desktop: Enhance your PHP experience</a></li></ul></div></div><div class="sln-row"><div class="sln-span3"><h2>Solutions &amp; Services</h2><ul><li><a data-ga="sln_training" href="http://training.sensiolabs.com/">Training</a></li><li><a data-ga="sln_certification" href="http://sensiolabs.com/en/symfony/certification.html">Certification</a></li><li><a data-ga="sln_services" href="http://sensiolabs.com/en/services/services.html">Technical Solutions</a></li><li><a data-ga="sln_support" href="http://sensiolabs.com/en/support/sensiolabssupport.html">Support</a></li><li><a data-ga="sln_experts" href="http://expert.sensiolabs.com/">Experts</a></li></ul></div><div class="sln-span3"><h2>Community &amp; Network</h2><ul><li><a data-ga="sln_connect" href="https://connect.sensiolabs.com/">Community Network</a></li><li><a data-ga="sln_live" href="http://live.symfony.com/">Conferences</a></li><li><a data-ga="sln_youtube" href="https://www.youtube.com/user/SensioLabs">Videos</a></li><li><a data-ga="sln_partners" href="http://sensiolabs.com/en/partnership/overview.html">Partners</a></li><li><a data-ga="sln_job_board" href="http://jobs.sensiolabs.com/">Job Board</a></li></ul></div></div></div></div></div></div>
    
</div></div>

            <div class="content">
                
    
    
<div class="header">
    <div class="content_header clear_fix">
        <div class="illustration_logo_header">
                            <a href="http://symfony.com/"><img src="./Chapter 2 - Form Validation (1_1) - Symfony_files/logo_symfony_header.png" alt="Symfony" class="png_fix"></a>
                    </div>
        <div class="box_download clear_fix">
            <div class="legend_download">
                <img src="./Chapter 2 - Form Validation (1_1) - Symfony_files/a_sensiolabs_product.png" alt="a SensioLabs product" class="png_fix">
            </div>
            <div class="download_button_wrapper">
                <a href="http://symfony.com/download" class="download_button">    <span class="border_l png_fix">
        <span class="border_r png_fix">
            <span class="btn_bg png_fix">
                DOWNLOAD NOW
            </span>
        </span>
    </span>
</a>
            </div>
        </div>
    </div>
</div>

                <div class="main_menu clear_fix" id="main_menu_id">
                        <li>
                            
        <a href="http://symfony.com/what-is-symfony">
            What is Symfony?
        </a>

                    </li>
    <li class="selected">
                            
        <a href="http://symfony.com/get-started">
            Get started
        </a>

                    </li>
    <li>
                            
        <a href="http://symfony.com/doc/current/index.html">
            Documentation
        </a>

                    </li>
    <li>
                            
        <a href="http://symfony.com/community">
            Community
        </a>

                    </li>
    <li>
                            
        <a href="http://symfony.com/jobs">
            Jobs
        </a>

                    </li>
    <li>
                            
        <a href="http://symfony.com/services">
            Services
        </a>

                    </li>
    <li>
                            
        <a href="http://symfony.com/blog/">
            News
        </a>

                    </li>
    <li>
                            
        <a href="http://symfony.com/about">
            About
        </a>

                    </li>
                </div>

                                    <div class="main_content">
                            <div style="-moz-border-radius:8px; -webkit-border-radius:8px; border-radius:8px; background-color: #ffa; padding: 15px; margin-bottom: 20px; color: #555">
        <strong>Caution</strong>: You are browsing the legacy <a href="http://symfony.com/legacy"><img style="vertical-align: middle; padding-left: 3px" src="./Chapter 2 - Form Validation (1_1) - Symfony_files/symfony_button.gif"></a> <a href="http://symfony.com/legacy">1.x</a> part of this website.
    </div>

            <div style="-moz-border-radius:8px; -webkit-border-radius:8px; border-radius:8px; background-color: #f99; padding: 15px; margin-bottom: 20px; color: #555">
            This version of symfony is not maintained anymore.
            If some of your projects still use this version, consider <a href="http://symfony.com/download">upgrading</a>.
        </div>
    
                                <div class="box_columns clear_fix">
                                                                                                            <div class="column_01">
                                                                                            <div class="submenu">
                                                    <ul class="list_submenu">    <li>
                            
        <a href="http://symfony.com/download">
            Download Symfony
        </a>

                    </li>
    <li>
                            
        <a href="http://symfony.com/distributions">
            Symfony Distributions
        </a>

                    </li>
    <li>
                            
        <a href="http://symfony.com/components">
            Symfony Components
        </a>

                    </li>
    <li>
                            
        <a href="http://symfony.com/projects">
            Projects using Symfony
        </a>

                    </li>
    <li>
                            
        <a href="http://symfony.com/doc/current/quick_tour/the_big_picture.html">
            Quick Tour
        </a>

                    </li>
    <li class="selected">
                            
        <a href="http://symfony.com/legacy">
            symfony1 Legacy
        </a>

                    </li>
</ul>
                                                </div>
                                                                        <div class="toc">
                <h2 class="title_05">Table of Contents</h2>
                <div class="toc-content">
                    <ul><li><ul><li><a class="reference internal" href="http://symfony.com/legacy/doc/forms/1_1/en/02-Form-Validation#chapter_02_before_we_start">Before we start</a></li><li><a class="reference internal" href="http://symfony.com/legacy/doc/forms/1_1/en/02-Form-Validation#chapter_02_validators">Validators</a><ul><li><a class="reference internal" href="http://symfony.com/legacy/doc/forms/1_1/en/02-Form-Validation#chapter_02_sub_the_sfvalidatorbase_class">The <code>sfValidatorBase</code> class</a></li><li><a class="reference internal" href="http://symfony.com/legacy/doc/forms/1_1/en/02-Form-Validation#chapter_02_sub_the_purpose_of_validators">The Purpose of Validators</a></li><li><a class="reference internal" href="http://symfony.com/legacy/doc/forms/1_1/en/02-Form-Validation#chapter_02_sub_invalid_form">Invalid Form</a></li></ul></li><li><a class="reference internal" href="http://symfony.com/legacy/doc/forms/1_1/en/02-Form-Validation#chapter_02_validator_customization">Validator Customization</a><ul><li><a class="reference internal" href="http://symfony.com/legacy/doc/forms/1_1/en/02-Form-Validation#chapter_02_sub_customizing_error_messages">Customizing error messages</a></li></ul></li><li><a class="reference internal" href="http://symfony.com/legacy/doc/forms/1_1/en/02-Form-Validation#chapter_02_validators_security">Validators Security</a></li><li><a class="reference internal" href="http://symfony.com/legacy/doc/forms/1_1/en/02-Form-Validation#chapter_02_logical_validators">Logical Validators</a></li><li><a class="reference internal" href="http://symfony.com/legacy/doc/forms/1_1/en/02-Form-Validation#chapter_02_global_validators">Global Validators</a></li><li><a class="reference internal" href="http://symfony.com/legacy/doc/forms/1_1/en/02-Form-Validation#chapter_02_file_upload">File Upload</a></li></ul></li></ul>
                </div>
            </div>
            
    <div id="license">
    This work is licensed under the Creative Commons Attribution-Share Alike 3.0 Unported License license.
</div>
                                                <div class="ads">
    <div class="ad" id="ad_jobs"><h3><span style="background-color: #0088cc; color: #fff; padding: 0 4px">Job</span> <a href="http://jobs.sensiolabs.com/DE/CDI/mfb-meinfernbus-gmbh-symfony2-developer-f-m">MFB MeinFernbus GmbH</a></h3><div>Berlin, Germany<br>Symfony2 Developer (f/m)</div><div><cite>jobs.sensiolabs.com</cite></div></div>
            <div class="ad" id="ad_trainings_1">
            <h3><a href="http://trainings.sensiolabs.com/en/training/getting-started-with-symfony2">Master Symfony2 fundamentals</a></h3>
            <div>Be trained by SensioLabs experts (2 to 6 day sessions -- French or English).</div>
            <div><cite>trainings.sensiolabs.com</cite></div>
        </div>
            <div class="ad" id="ad_support_1">
            <h3><a href="http://sensiolabs.com/en/support/sensiolabs_support.html">Discover the SensioLabs Support</a></h3>
            <div>Access to the SensioLabs Competency Center for an exclusive and tailor-made support on Symfony</div>
            <div><cite>sensiolabs.com</cite></div>
        </div>
    </div>

<script type="text/javascript">
    $(document).ready(function () {
                    $("#ad_trainings_1").click(function () {
                _gaq.push(['_trackEvent', 'Ads', 'Ads', 'trainings_1']);
            });
                    $("#ad_support_1").click(function () {
                _gaq.push(['_trackEvent', 'Ads', 'Ads', 'support_1']);
            });
            });
</script>
                                                                                                    <div class="ads">
                                                        <a href="https://insight.sensiolabs.com/"><img src="./Chapter 2 - Form Validation (1_1) - Symfony_files/sensiolabsinsight(1).png" alt=""></a>
                                                    </div>
                                                                                                                                    </div>
                                                                        <div class="column_02">
                                                                                    <div class="breadcrumb">
                                                <a href="http://symfony.com/">Home</a> »
                                                            symfony 1.x »
        Legacy Documentation » Forms
                                            </div>

                                                                                                <div class="box_title">
                                                        <div class="box_version_wrapper">
        <div class="version_wrapper">
            <div class="version">
                1.1
                <span class="arrow">
                    <img src="./Chapter 2 - Form Validation (1_1) - Symfony_files/down_arrow_white.png" alt="">
                </span>
            </div>
            <div class="other_version">
                                    <ul>
                                                                                    <li>
                                    <a href="http://symfony.com/legacy/doc/forms/1_2/en/02-form-validation">1.2 version</a>
                                </li>
                                                                                                                <li>
                                    <a href="http://symfony.com/legacy/doc/forms/1_4/en/02-form-validation">1.4 version</a>
                                </li>
                                                                        </ul>
                                                                            <hr>
                                        <ul>
                                                                                    <li>
                                    <a href="http://symfony.com/legacy/doc/forms/1_1/es/02-form-validation">Spanish</a>
                                </li>
                                                                                                                <li>
                                    <a href="http://symfony.com/legacy/doc/forms/1_1/fr/02-form-validation">French</a>
                                </li>
                                                                                                                <li>
                                    <a href="http://symfony.com/legacy/doc/forms/1_1/hu/02-form-validation">Hungarian</a>
                                </li>
                                                                                                                <li>
                                    <a href="http://symfony.com/legacy/doc/forms/1_1/it/02-form-validation">Italian</a>
                                </li>
                                                                                                                <li>
                                    <a href="http://symfony.com/legacy/doc/forms/1_1/ja/02-form-validation">Japanese</a>
                                </li>
                                                                        </ul>
                                            </div>
        </div>
    </div>
                                                    <h1 class="title_01">            Chapter 2 - Form Validation
    </h1>
                                                </div>
                                            
        
                                                <div class="box_article doc_page">
                    <p>In Chapter 1 we learned how to create and display a basic contact form. In this chapter you will learn how to manage form validation.</p>

<h2><a name="chapter_02_before_we_start">Before we start</a></h2>

<p>The contact form created in Chapter 1 is not yet fully functional. What happens 
if a user submits an invalid email address or if the message the user submits is 
empty? In these cases, we would like to display error messages to ask the user 
to correct the input, as shown in Figure 2-1.</p>

<p class="figure">Figure 2-1 - Displaying Error Messages</p>

<p><img src="./Chapter 2 - Form Validation (1_1) - Symfony_files/02_01.png" alt="Displaying Error Messages" title="Displaying Error Messages"></p>

<p>Here are the validation rules to implement for the contact form:</p>

<ul>
<li><code>name</code>   : optional</li>
<li><code>email</code>  : mandatory, the value must be a valid email address</li>
<li><code>subject</code>: mandatory, the selected value must be valid  to a list of values</li>
<li><code>message</code>: mandatory, the length of the message must be at least four characters</li>
</ul>

            <div class="admonition-wrapper">
                <div class="note"></div>
                <div class="admonition admonition-note">
                    <p class="first admonition-title">note</p>
                    <p>
  Why do we need to validate the <code>subject</code> field? The <code>&lt;select&gt;</code> tag is already binding the user with pre-defined values. An average user can only select one of the displayed choices, but other values can be submitted using tools like the Firefox Developer Toolbar, or by simulating a request with tools like <code>curl</code> or <code>wget</code>.</p>

                </div>
            </div>

<p>Listing 2-1 shows the template we used in Chapter 1.</p>

<p class="figure">Listing 2-1 - The <code>Contact</code> Form Template</p>

<pre class="php"><span class="co1">// apps/frontend/modules/contact/templates/indexSucces.php</span>
&lt;form action=<span class="st0">"&lt;?php echo url_for('contact/index') ?&gt;"</span> method=<span class="st0">"POST"</span>&gt;
  &lt;table&gt;
    <span class="kw2">&lt;?php</span> <span class="kw3">echo</span> <span class="re0">$form</span> <span class="kw2">?&gt;</span>
    &lt;tr&gt;
      &lt;td colspan=<span class="st0">"2"</span>&gt;
        &lt;input type=<span class="st0">"submit"</span> /&gt;
      &lt;/td&gt;
    &lt;/tr&gt;
  &lt;/table&gt;
&lt;/form&gt;</pre>

<p>Figure 2-2 breaks down the interaction between the application and the user. The first step is to present the form to the user. When the user submits the form, either the input is valid and the user is redirected to the thank you page, or the input includes invalid values and the form is displayed again with error messages.</p>

<p class="figure">Figure 2-2 - Interaction between the Application and the User</p>

<p><img src="./Chapter 2 - Form Validation (1_1) - Symfony_files/02_02.png" alt="Interaction between the Application and the User" title="Interaction between the Application and the User"></p>

<h2><a name="chapter_02_validators">Validators</a></h2>

<p>A symfony form is made of fields. Each field can be identified by a unique name as we observed in Chapter 1. We connected a widget to each field in order to display it to the user, now let's see how we can apply validation rules to each of the fields.</p>

<h3><a name="chapter_02_sub_the_sfvalidatorbase_class">The <code>sfValidatorBase</code> class</a></h3>

<p>The validation of each field is done by objects inheriting from the <code>sfValidatorBase</code> class. In order to validate the contact form, we must define validator objects for each of the four fields: <code>name</code>, <code>email</code>, <code>subject</code>, and <code>message</code>. Listing 2-2 shows the implementation of these validators in the form class using the <code>setValidators()</code> method.</p>

<p class="figure">Listing 2-2 - Adding Validators to the <code>ContactForm</code> Class</p>

<pre class="php"><span class="co1">// lib/form/ContactForm.class.php</span>
<span class="kw2">class</span> ContactForm <span class="kw2">extends</span> sfForm
<span class="br0">{</span>
  protected <span class="kw3">static</span> <span class="re0">$subjects</span> = <span class="kw3">array</span><span class="br0">(</span><span class="st0">'Subject A'</span>, <span class="st0">'Subject B'</span>, <span class="st0">'Subject C'</span><span class="br0">)</span>;
&nbsp;
  <span class="kw2">public</span> <span class="kw2">function</span> configure<span class="br0">(</span><span class="br0">)</span>
  <span class="br0">{</span>
    <span class="re0">$this</span>-&gt;<span class="me1">setWidgets</span><span class="br0">(</span><span class="kw3">array</span><span class="br0">(</span>
      <span class="st0">'name'</span>    =&gt; <span class="kw2">new</span> sfWidgetFormInput<span class="br0">(</span><span class="br0">)</span>,
      <span class="st0">'email'</span>   =&gt; <span class="kw2">new</span> sfWidgetFormInput<span class="br0">(</span><span class="br0">)</span>,
      <span class="st0">'subject'</span> =&gt; <span class="kw2">new</span> sfWidgetFormSelect<span class="br0">(</span><span class="kw3">array</span><span class="br0">(</span><span class="st0">'choices'</span> =&gt; self::<span class="re0">$subjects</span><span class="br0">)</span><span class="br0">)</span>,
      <span class="st0">'message'</span> =&gt; <span class="kw2">new</span> sfWidgetFormTextarea<span class="br0">(</span><span class="br0">)</span>,
    <span class="br0">)</span><span class="br0">)</span>;
    <span class="re0">$this</span>-&gt;<span class="me1">widgetSchema</span>-&gt;<span class="me1">setNameFormat</span><span class="br0">(</span><span class="st0">'contact[%s]'</span><span class="br0">)</span>;
&nbsp;
    <span class="re0">$this</span>-&gt;<span class="me1">setValidators</span><span class="br0">(</span><span class="kw3">array</span><span class="br0">(</span>
      <span class="st0">'name'</span>    =&gt; <span class="kw2">new</span> sfValidatorString<span class="br0">(</span><span class="kw3">array</span><span class="br0">(</span><span class="st0">'required'</span> =&gt; <span class="kw2">false</span><span class="br0">)</span><span class="br0">)</span>,
      <span class="st0">'email'</span>   =&gt; <span class="kw2">new</span> sfValidatorEmail<span class="br0">(</span><span class="br0">)</span>,
      <span class="st0">'subject'</span> =&gt; <span class="kw2">new</span> sfValidatorChoice<span class="br0">(</span><span class="kw3">array</span><span class="br0">(</span><span class="st0">'choices'</span> =&gt; <span class="kw3">array_keys</span><span class="br0">(</span>self::<span class="re0">$subjects</span><span class="br0">)</span><span class="br0">)</span><span class="br0">)</span>,
      <span class="st0">'message'</span> =&gt; <span class="kw2">new</span> sfValidatorString<span class="br0">(</span><span class="kw3">array</span><span class="br0">(</span><span class="st0">'min_length'</span> =&gt; <span class="nu0">4</span><span class="br0">)</span><span class="br0">)</span>,
    <span class="br0">)</span><span class="br0">)</span>;
  <span class="br0">}</span>
<span class="br0">}</span></pre>

<p>We use three distinct validators:</p>

<ul>
<li><code>sfValidatorString</code>: validates a string</li>
<li><code>sfValidatorEmail</code> : validates an email</li>
<li><code>sfValidatorChoice</code>: validates the input value comes from a pre-defined list of choices</li>
</ul>

<p>Each validator takes a list of options as its first argument. Like the widgets, some of these options are mandatory, some are optional. For instance, the <code>sfValidatorChoice</code> validator takes one mandatory option, <code>choices</code>. Each validator can also take the options <code>required</code> and <code>trim</code>, defined by default in the <code>sfValidatorBase</code> class:</p>

<table cellspacing="0" class="doc_table">
<thead>
<tr>
  <th><strong>Option</strong></th>
  <th><strong>Default Value</strong></th>
  <th><strong>Description</strong></th>
</tr>
</thead>
<tbody>
<tr>
  <td>required</td>
  <td><code>true</code></td>
  <td>Specifies if the field is mandatory</td>
</tr>
<tr>
  <td>trim</td>
  <td><code>false</code></td>
  <td>Automatically removes whitespaces at the beginning and at the end of a string before the validation occurs</td>
</tr>
</tbody>
</table>

<p>Let's see the available options for the validators we have just used:</p>

<table cellspacing="0" class="doc_table">
<thead>
<tr>
  <th><strong>Validator</strong></th>
  <th><strong>Mandatory Options</strong></th>
  <th><strong>Optional Options</strong></th>
</tr>
</thead>
<tbody>
<tr>
  <td>sfValidatorString</td>
  <td></td>
  <td><code>max_length</code></td>
</tr>
<tr>
  <td></td>
  <td></td>
  <td><code>min_length</code></td>
</tr>
<tr>
  <td>sfValidatorEmail</td>
  <td></td>
  <td><code>pattern</code></td>
</tr>
<tr>
  <td>sfValidatorChoice</td>
  <td><code>choices</code></td>
  <td></td>
</tr>
</tbody>
</table>

<p>If you try to submit the form with invalid values, you will not see any change in the behavior. We must update the <code>contact</code> module to validate the submitted values, as shown in Listing 2-3.</p>

<p class="figure">Listing 2-3 - Implementing Validation in the <code>contact</code> Module</p>

<pre class="php"><span class="kw2">class</span> contactActions <span class="kw2">extends</span> sfActions
<span class="br0">{</span>
  <span class="kw2">public</span> <span class="kw2">function</span> executeIndex<span class="br0">(</span><span class="re0">$request</span><span class="br0">)</span>
  <span class="br0">{</span>
    <span class="re0">$this</span>-&gt;<span class="me1">form</span> = <span class="kw2">new</span> ContactForm<span class="br0">(</span><span class="br0">)</span>;
&nbsp;
    <span class="kw1">if</span> <span class="br0">(</span><span class="re0">$request</span>-&gt;<span class="me1">isMethod</span><span class="br0">(</span><span class="st0">'post'</span><span class="br0">)</span><span class="br0">)</span>
    <span class="br0">{</span>
      <span class="re0">$this</span>-&gt;<span class="me1">form</span>-&gt;<span class="me1">bind</span><span class="br0">(</span><span class="re0">$request</span>-&gt;<span class="me1">getParameter</span><span class="br0">(</span><span class="st0">'contact'</span><span class="br0">)</span><span class="br0">)</span>;
      <span class="kw1">if</span> <span class="br0">(</span><span class="re0">$this</span>-&gt;<span class="me1">form</span>-&gt;<span class="me1">isValid</span><span class="br0">(</span><span class="br0">)</span><span class="br0">)</span>
      <span class="br0">{</span>
        <span class="re0">$this</span>-&gt;<span class="me1">redirect</span><span class="br0">(</span><span class="st0">'contact/thankyou?'</span>.http_build_query<span class="br0">(</span><span class="re0">$this</span>-&gt;<span class="me1">form</span>-&gt;<span class="me1">getValues</span><span class="br0">(</span><span class="br0">)</span><span class="br0">)</span><span class="br0">)</span>;
      <span class="br0">}</span>
    <span class="br0">}</span>
  <span class="br0">}</span>
&nbsp;
  <span class="kw2">public</span> <span class="kw2">function</span> executeThankyou<span class="br0">(</span><span class="br0">)</span>
  <span class="br0">{</span>
  <span class="br0">}</span>
<span class="br0">}</span></pre>

<p>The Listing 2-3 introduces a lot of new concepts:</p>

<ul>
<li><p>In the case of the initial <code>GET</code> request, the form is initialized and passed on to the template to display to the user. The form is then in an <strong>initial state</strong>:</p>

<pre class="php"><span class="re0">$this</span>-&gt;<span class="me1">form</span> = <span class="kw2">new</span> ContactForm<span class="br0">(</span><span class="br0">)</span>;</pre></li>
<li><p>When the user submits the form with a <code>POST</code> request, the <code>bind()</code> method binds the form with the user input data and triggers the validation mechanism. The form then changes to a <strong>bound state</strong>.</p>

<pre class="php"><span class="kw1">if</span> <span class="br0">(</span><span class="re0">$request</span>-&gt;<span class="me1">isMethod</span><span class="br0">(</span><span class="st0">'post'</span><span class="br0">)</span><span class="br0">)</span>
<span class="br0">{</span>
  <span class="re0">$this</span>-&gt;<span class="me1">form</span>-&gt;<span class="me1">bind</span><span class="br0">(</span><span class="re0">$request</span>-&gt;<span class="me1">getParameter</span><span class="br0">(</span><span class="st0">'contact'</span><span class="br0">)</span><span class="br0">)</span>;</pre></li>
<li><p>Once the form is bound, it is possible to check its validity using the <code>isValid()</code> method:</p>

<ul>
<li><p>If the return value is <code>true</code>, the form is valid and the user can be redirected to the thank you page:</p>

<pre class="php"><span class="kw1">if</span> <span class="br0">(</span><span class="re0">$this</span>-&gt;<span class="me1">form</span>-&gt;<span class="me1">isValid</span><span class="br0">(</span><span class="br0">)</span><span class="br0">)</span>
<span class="br0">{</span>
  <span class="re0">$this</span>-&gt;<span class="me1">redirect</span><span class="br0">(</span><span class="st0">'contact/thankyou?'</span>.http_build_query<span class="br0">(</span><span class="re0">$this</span>-&gt;<span class="me1">form</span>-&gt;<span class="me1">getValues</span><span class="br0">(</span><span class="br0">)</span><span class="br0">)</span><span class="br0">)</span>;
<span class="br0">}</span></pre></li>
<li><p>If not, the <code>indexSuccess</code> template is displayed as initially. The validation process adds the error messages into the form to be displayed to the user.</p></li>
</ul></li>
</ul>

            <div class="admonition-wrapper">
                <div class="note"></div>
                <div class="admonition admonition-note">
                    <p class="first admonition-title">note</p>
                    <p>
  When a form is in an initial state, the <code>isValid()</code> method always return <code>false</code> and the <code>getValues()</code> method will always return an empty array.</p>

                </div>
            </div>

<p>Figure 2-3 shows the code that is executed during the interaction between the application and the user.</p>

<p class="figure">Figure 2-3 - Code executed during the Interaction between the Application and the User</p>

<p><img src="./Chapter 2 - Form Validation (1_1) - Symfony_files/02_03.png" alt="Code executed during the Interaction between the Application and the User" title="Code executed during the Interaction between the Application and the User"></p>

<h3><a name="chapter_02_sub_the_purpose_of_validators">The Purpose of Validators</a></h3>

<p>You might have noticed that during the redirection to the thank you page, we are not using <code>$request-&gt;getParameter('contact')</code> but <code>$this-&gt;form-&gt;getValues()</code>. In fact, <code>$request-&gt;getParameter('contact')</code> returns the user data when <code>$this-&gt;form-&gt;getValues()</code> returns the validated data.</p>

<p>If the form is valid, why can not those two statements be identical? Each validator actually has two tasks: a <strong>validation task</strong>, but also a <strong>cleaning task</strong>. The <code>getValues()</code> method is in fact returning the validated and cleaned data.</p>

<p>The cleaning process has two main actions: <strong>normalization</strong> and <strong>conversion</strong> of the input data.</p>

<p>We already went over a case of data normalization with the <code>trim</code> option. But the normalization action is much more important for a date field for instance. The <code>sfValidatorDate</code> validates a date. This validator takes a lot of formats for input (a timestamp, a format based on a regular expression, ...). Instead of simply returning the input value, it converts it by default in the <code>Y-m-d H:i:s</code> format. Therefore, the developer is guaranteed to get a stable format, despite the quality of the input format. The system offers a lot of flexibility to the user, and ensures consistency to the developer.</p>

<p>Now, consider a conversion action, like a file upload. A file validation can be done using the <code>sfValidatorFile</code>. Once the file is uploaded, instead of returning the name of the file, the validator returns a <code>sfValidatedFile</code> object, making it easier to handle the file information. We will see later on in this chapter how to use this validator.</p>

            <div class="admonition-wrapper">
                <div class="tip"></div>
                <div class="admonition admonition-tip">
                    <p class="first admonition-title">tip</p>
                    <p>
  The <code>getValues()</code> method returns an array of all the validated and cleaned data. But as retrieving just one value is sometimes helpful, there is also a <code>getValue()</code> method: <code>$email = $this-&gt;form-&gt;getValue('email')</code>.</p>

                </div>
            </div>

<h3><a name="chapter_02_sub_invalid_form">Invalid Form</a></h3>

<p>Whenever there are invalid fields in the form, the <code>indexSuccess</code> template is displayed. Figure 2-4 shows what we get when we submit a form with invalid data.</p>

<p class="figure">Figure 2-4 - Invalid Form</p>

<p><img src="./Chapter 2 - Form Validation (1_1) - Symfony_files/02_04.png" alt="Invalid Form" title="Invalid Form"></p>

<p>The call to the <code>&lt;?php echo $form ?&gt;</code> statement automatically takes into consideration the error messages associated with the fields, and will automatically populate the users cleaned input data.</p>

<p>When the form is bound to external data by using the <code>bind()</code> method, the form switches to a bound state and the following actions are triggered:</p>

<ul>
<li><p>The validation process is executed</p></li>
<li><p>The error messages are stored in the form in order to be available to the template</p></li>
<li><p>The default values of the form are replaced with the users cleaned input data</p></li>
</ul>

<p>The information needed to display the error messages or the user input data are easily available by using the <code>form</code> variable in the template.</p>

            <div class="admonition-wrapper">
                <div class="caution"></div>
                <div class="admonition admonition-caution">
                    <p class="first admonition-title">caution</p>
                    <p>
  As seen in Chapter 1, we can pass default values to the form class constructor. After the submission of an invalid form, these default values are overridden by the submitted values, so that the user can correct their mistakes. So, never use the input data as default values like in this example: <code>$this-&gt;form-&gt;setDefaults($request-&gt;getParameter('contact'))</code>.</p>

                </div>
            </div>

<h2><a name="chapter_02_validator_customization">Validator Customization</a></h2>

<h3><a name="chapter_02_sub_customizing_error_messages">Customizing error messages</a></h3>

<p>As you may have noticed in Figure 2-4, error messages are not really useful. Let's see how to customize them to be more intuitive.</p>

<p>Each validator can add errors to the form. An error consists of an error code and an error message. Every validator has at least the <code>required</code> and <code>invalid</code> errors defined in the <code>sfValidatorBase</code>:</p>

<table cellspacing="0" class="doc_table">
<thead>
<tr>
  <th><strong>Code</strong></th>
  <th><strong>Message</strong></th>
  <th><strong>Description</strong></th>
</tr>
</thead>
<tbody>
<tr>
  <td>required</td>
  <td><code>Required.</code></td>
  <td>The field is mandatory and the value is empty</td>
</tr>
<tr>
  <td>invalid</td>
  <td><code>Invalid.</code></td>
  <td>The field is invalid</td>
</tr>
</tbody>
</table>

<p>Here are the error codes associated to the validators we have already used:</p>

<table cellspacing="0" class="doc_table">
<thead>
<tr>
  <th><strong>Validator</strong></th>
  <th><strong>Error Codes</strong></th>
</tr>
</thead>
<tbody>
<tr>
  <td>sfValidatorString</td>
  <td><code>max_length</code></td>
</tr>
<tr>
  <td></td>
  <td><code>min_length</code></td>
</tr>
<tr>
  <td>sfValidatorEmail</td>
  <td></td>
</tr>
<tr>
  <td>sfValidatorChoice</td>
  <td></td>
</tr>
</tbody>
</table>

<p>Customizing error messages can be done by passing a second argument when creating the validation objects. Listing 2-4 customizes several error messages and Figure 2-5 shows customized error messages in action.</p>

<p class="figure">Listing 2-4 - Customizing Error Messages</p>

<pre class="php"><span class="kw2">class</span> ContactForm <span class="kw2">extends</span> sfForm
<span class="br0">{</span>
  protected <span class="kw3">static</span> <span class="re0">$subjects</span> = <span class="kw3">array</span><span class="br0">(</span><span class="st0">'Subject A'</span>, <span class="st0">'Subject B'</span>, <span class="st0">'Subject C'</span><span class="br0">)</span>;
&nbsp;
  <span class="kw2">public</span> <span class="kw2">function</span> configure<span class="br0">(</span><span class="br0">)</span>
  <span class="br0">{</span>
    <span class="co1">// ...</span>
&nbsp;
    <span class="re0">$this</span>-&gt;<span class="me1">setValidators</span><span class="br0">(</span><span class="kw3">array</span><span class="br0">(</span>
      <span class="st0">'name'</span>    =&gt; <span class="kw2">new</span> sfValidatorString<span class="br0">(</span><span class="kw3">array</span><span class="br0">(</span><span class="st0">'required'</span> =&gt; <span class="kw2">false</span><span class="br0">)</span><span class="br0">)</span>,
      <span class="st0">'email'</span>   =&gt; <span class="kw2">new</span> sfValidatorEmail<span class="br0">(</span><span class="kw3">array</span><span class="br0">(</span><span class="br0">)</span>, <span class="kw3">array</span><span class="br0">(</span><span class="st0">'invalid'</span> =&gt; <span class="st0">'The email address is invalid.'</span><span class="br0">)</span><span class="br0">)</span>,
      <span class="st0">'subject'</span> =&gt; <span class="kw2">new</span> sfValidatorChoice<span class="br0">(</span><span class="kw3">array</span><span class="br0">(</span><span class="st0">'choices'</span> =&gt; <span class="kw3">array_keys</span><span class="br0">(</span>self::<span class="re0">$subjects</span><span class="br0">)</span><span class="br0">)</span><span class="br0">)</span>,
      <span class="st0">'message'</span> =&gt; <span class="kw2">new</span> sfValidatorString<span class="br0">(</span><span class="kw3">array</span><span class="br0">(</span><span class="st0">'min_length'</span> =&gt; <span class="nu0">4</span><span class="br0">)</span>, <span class="kw3">array</span><span class="br0">(</span><span class="st0">'required'</span> =&gt; <span class="st0">'The message field is required.'</span><span class="br0">)</span><span class="br0">)</span>,
    <span class="br0">)</span><span class="br0">)</span>;
  <span class="br0">}</span>
<span class="br0">}</span></pre>

<p class="figure">Figure 2-5 - Customized Error Messages</p>

<p><img src="./Chapter 2 - Form Validation (1_1) - Symfony_files/02_05.png" alt="Customized Error Messages" title="Customized Error Messages"></p>

<p>Figure 2-6 shows the error message you get if you try to submit a message too short (we set the minimum length to 4 characters).</p>

<p class="figure">Figure 2-6 - Too short Message Error</p>

<p><img src="./Chapter 2 - Form Validation (1_1) - Symfony_files/02_06.png" alt="Too short Message Error" title="Too short Message Error"></p>

<p>The default error message related to this error code (<code>min_length</code>) is different from the messages we already went over, since it implements two dynamic values: the user input data (<code>foo</code>) and the minimum number of characters allowed for this field (<code>4</code>). Listing 2-5 customizes this message using theses dynamic values and Figure 2-7 shows the result.</p>

<p class="figure">Listing 2-5 - Customizing the Error Messages with Dynamic Values</p>

<pre class="php"><span class="kw2">class</span> ContactForm <span class="kw2">extends</span> sfForm
<span class="br0">{</span>
  <span class="kw2">public</span> <span class="kw2">function</span> configure<span class="br0">(</span><span class="br0">)</span>
  <span class="br0">{</span>
    <span class="co1">// ...</span>
&nbsp;
    <span class="re0">$this</span>-&gt;<span class="me1">setValidators</span><span class="br0">(</span><span class="kw3">array</span><span class="br0">(</span>
      <span class="st0">'name'</span>    =&gt; <span class="kw2">new</span> sfValidatorString<span class="br0">(</span><span class="kw3">array</span><span class="br0">(</span><span class="st0">'required'</span> =&gt; <span class="kw2">false</span><span class="br0">)</span><span class="br0">)</span>,
      <span class="st0">'email'</span>   =&gt; <span class="kw2">new</span> sfValidatorEmail<span class="br0">(</span><span class="kw3">array</span><span class="br0">(</span><span class="br0">)</span>, <span class="kw3">array</span><span class="br0">(</span><span class="st0">'invalid'</span> =&gt; <span class="st0">'Email address is invalid.'</span><span class="br0">)</span><span class="br0">)</span>,
      <span class="st0">'subject'</span> =&gt; <span class="kw2">new</span> sfValidatorChoice<span class="br0">(</span><span class="kw3">array</span><span class="br0">(</span><span class="st0">'choices'</span> =&gt; <span class="kw3">array_keys</span><span class="br0">(</span>self::<span class="re0">$subjects</span><span class="br0">)</span><span class="br0">)</span><span class="br0">)</span>,
      <span class="st0">'message'</span> =&gt; <span class="kw2">new</span> sfValidatorString<span class="br0">(</span><span class="kw3">array</span><span class="br0">(</span><span class="st0">'min_length'</span> =&gt; <span class="nu0">4</span><span class="br0">)</span>, <span class="kw3">array</span><span class="br0">(</span>
        <span class="st0">'required'</span>   =&gt; <span class="st0">'The message field is required'</span>,
        <span class="st0">'min_length'</span> =&gt; <span class="st0">'The message "%value%" is too short. It must be of %min_length% characters at least.'</span>,
      <span class="br0">)</span><span class="br0">)</span>,
    <span class="br0">)</span><span class="br0">)</span>;
  <span class="br0">}</span>
<span class="br0">}</span></pre>

<p class="figure">Figure 2-7 - Customized Error Messages with Dynamic Values</p>

<p><img src="./Chapter 2 - Form Validation (1_1) - Symfony_files/02_07.png" alt="Customized Error Messages with Dynamic Values" title="Customized Error Messages with Dynamic Values"></p>

<p>Each error message can use dynamic values, enclosing the value name with the percent character (<code>%</code>). Available values are usually the user input data (<code>value</code>) and the option values of the validator related to the error.</p>

            <div class="admonition-wrapper">
                <div class="tip"></div>
                <div class="admonition admonition-tip">
                    <p class="first admonition-title">tip</p>
                    <p>
  If you want to review all the error codes, options, and default message of a validator, please refer to the API online documentation (<a href="http://www.symfony-project.org/api/1_1/">/api/1_1/</a>). Each code, option and error message are detailed there, along with the default values (for instance, the <code>sfValidatorString</code> validator API is available at <a href="http://www.symfony-project.org/api/1_1/sfValidatorString">/api/1_1/sfValidatorString</a>).</p>

                </div>
            </div>

<h2><a name="chapter_02_validators_security">Validators Security</a></h2>

<p>By default, a form is valid only if every field submitted by the user has a validator. This ensures that each field has its validation rules and that it is not possible to inject values for fields that are not defined in the form.</p>

<p>To help understand this security rule, let's consider a user object as shown in Listing 2-6.</p>

<p class="figure">Listing 2-6 - The <code>User</code> Class</p>

<pre class="php"><span class="kw2">class</span> User
<span class="br0">{</span>
  protected
    <span class="re0">$name</span> = <span class="st0">''</span>,
    <span class="re0">$is_admin</span> = <span class="kw2">false</span>;
&nbsp;
  <span class="kw2">public</span> <span class="kw2">function</span> setFields<span class="br0">(</span><span class="re0">$fields</span><span class="br0">)</span>
  <span class="br0">{</span>
    <span class="kw1">if</span> <span class="br0">(</span><span class="kw3">isset</span><span class="br0">(</span><span class="re0">$fields</span><span class="br0">[</span><span class="st0">'name'</span><span class="br0">]</span><span class="br0">)</span><span class="br0">)</span>
    <span class="br0">{</span>
      <span class="re0">$this</span>-&gt;<span class="me1">name</span> = <span class="re0">$fields</span><span class="br0">[</span><span class="st0">'name'</span><span class="br0">]</span>;
    <span class="br0">}</span>
&nbsp;
    <span class="kw1">if</span> <span class="br0">(</span><span class="kw3">isset</span><span class="br0">(</span><span class="re0">$fields</span><span class="br0">[</span><span class="st0">'is_admin'</span><span class="br0">]</span><span class="br0">)</span><span class="br0">)</span>
    <span class="br0">{</span>
      <span class="re0">$this</span>-&gt;<span class="me1">is_admin</span> = <span class="re0">$fields</span><span class="br0">[</span><span class="st0">'is_admin'</span><span class="br0">]</span>;
    <span class="br0">}</span>
  <span class="br0">}</span>
&nbsp;
  <span class="co1">// ...</span>
<span class="br0">}</span></pre>

<p>A <code>User</code> object is composed of two properties, the user name (<code>name</code>), and a boolean that stores the administrator status (<code>is_admin</code>). The <code>setFields()</code> method updates both properties. Listing 2-7 shows the form related to the <code>User</code> class, allowing the user to modify the <code>name</code> property only.</p>

<p class="figure">Listing 2-7 - <code>User</code> Form</p>

<pre class="php"><span class="kw2">class</span> UserForm <span class="kw2">extends</span> sfForm
<span class="br0">{</span>
  <span class="kw2">public</span> <span class="kw2">function</span> configure<span class="br0">(</span><span class="br0">)</span>
  <span class="br0">{</span>
    <span class="re0">$this</span>-&gt;<span class="me1">setWidgets</span><span class="br0">(</span><span class="kw3">array</span><span class="br0">(</span><span class="st0">'name'</span> =&gt; <span class="kw2">new</span> sfWidgetFormInputString<span class="br0">(</span><span class="br0">)</span><span class="br0">)</span><span class="br0">)</span>;
    <span class="re0">$this</span>-&gt;<span class="me1">widgetSchema</span>-&gt;<span class="me1">setNameFormat</span><span class="br0">(</span><span class="st0">'user[%s]'</span><span class="br0">)</span>;
&nbsp;
    <span class="re0">$this</span>-&gt;<span class="me1">setValidators</span><span class="br0">(</span><span class="kw3">array</span><span class="br0">(</span><span class="st0">'name'</span> =&gt; <span class="kw2">new</span> sfValidatorString<span class="br0">(</span><span class="br0">)</span><span class="br0">)</span><span class="br0">)</span>;
  <span class="br0">}</span>
<span class="br0">}</span></pre>

<p>Listing 2-8 shows an implementation of the <code>user</code> module using the previously defined form allowing the user to modify the name field.</p>

<p class="figure">Listing 2-8 - <code>user</code> Module Implementation</p>

<pre class="php"><span class="kw2">class</span> userActions <span class="kw2">extends</span> sfActions
<span class="br0">{</span>
  <span class="kw2">public</span> <span class="kw2">function</span> executeIndex<span class="br0">(</span><span class="re0">$request</span><span class="br0">)</span>
  <span class="br0">{</span>
    <span class="re0">$this</span>-&gt;<span class="me1">form</span> = <span class="kw2">new</span> UserForm<span class="br0">(</span><span class="br0">)</span>;
&nbsp;
    <span class="kw1">if</span> <span class="br0">(</span><span class="re0">$request</span>-&gt;<span class="me1">isMethod</span><span class="br0">(</span><span class="st0">'post'</span><span class="br0">)</span><span class="br0">)</span>
    <span class="br0">{</span>
      <span class="re0">$this</span>-&gt;<span class="me1">form</span>-&gt;<span class="me1">bind</span><span class="br0">(</span><span class="re0">$request</span>-&gt;<span class="me1">getParameter</span><span class="br0">(</span><span class="st0">'user'</span><span class="br0">)</span><span class="br0">)</span>;
      <span class="kw1">if</span> <span class="br0">(</span><span class="re0">$this</span>-&gt;<span class="me1">form</span>-&gt;<span class="me1">isValid</span><span class="br0">(</span><span class="br0">)</span><span class="br0">)</span>
      <span class="br0">{</span>
        <span class="re0">$user</span> = <span class="co1">// retrieving the current user</span>
&nbsp;
        <span class="re0">$user</span>-&gt;<span class="me1">setFields</span><span class="br0">(</span><span class="re0">$this</span>-&gt;<span class="me1">form</span>-&gt;<span class="me1">getValues</span><span class="br0">(</span><span class="br0">)</span><span class="br0">)</span>;
&nbsp;
        <span class="re0">$this</span>-&gt;<span class="me1">redirect</span><span class="br0">(</span><span class="st0">'...'</span><span class="br0">)</span>;
      <span class="br0">}</span>
    <span class="br0">}</span>
  <span class="br0">}</span>
<span class="br0">}</span></pre>

<p>Without any protection, if the user submits a form with a value for the <code>name</code> field, and also for the <code>is_admin</code> field, then our code is vulnerable. This is easily accomplished using a tool like Firebug. In fact, the <code>is_admin</code> value is always valid, because the field does not have any validator associated with it in the form. Whatever the value is, the <code>setFields()</code> method will update not only the <code>name</code> property, but also the <code>is_admin</code> property.</p>

<p>If you test out this code passing a value for both the <code>name</code> and <code>is_admin</code> fields, you'll get an "Extra field name." global error, as shown in Figure 2-8. The system generated an error because some submitted fields does not have any validator associated with themselves; the <code>is_admin</code> field is not defined in the <code>UserForm</code> form.</p>

<p class="figure">Figure 2-8 - Missing Validator Error</p>

<p><img src="./Chapter 2 - Form Validation (1_1) - Symfony_files/02_08.png" alt="Missing Validator Error" title="Missing Validator Error"></p>

<p>All the validators we have seen so far generate errors associated with fields. Where can this global error come from? When we use the <code>setValidators()</code> method, symfony creates a <code>sfValidatorSchema</code> object. The <code>sfValidatorSchema</code> defines a collection of validators. The call to <code>setValidators()</code> is equivalent to the following code:</p>

<pre class="php"><span class="re0">$this</span>-&gt;<span class="me1">setValidatorSchema</span><span class="br0">(</span><span class="kw2">new</span> sfValidatorSchema<span class="br0">(</span><span class="kw3">array</span><span class="br0">(</span>
  <span class="st0">'email'</span>   =&gt; <span class="kw2">new</span> sfValidatorEmail<span class="br0">(</span><span class="br0">)</span>,
  <span class="st0">'subject'</span> =&gt; <span class="kw2">new</span> sfValidatorChoice<span class="br0">(</span><span class="kw3">array</span><span class="br0">(</span><span class="st0">'choices'</span> =&gt; <span class="kw3">array_keys</span><span class="br0">(</span>self::<span class="re0">$subjects</span><span class="br0">)</span><span class="br0">)</span><span class="br0">)</span>,
  <span class="st0">'message'</span> =&gt; <span class="kw2">new</span> sfValidatorString<span class="br0">(</span><span class="kw3">array</span><span class="br0">(</span><span class="st0">'min_length'</span> =&gt; <span class="nu0">4</span><span class="br0">)</span><span class="br0">)</span>,
<span class="br0">)</span><span class="br0">)</span><span class="br0">)</span>;</pre>

<p>The <code>sfValidatorSchema</code> has two validation rules enabled by default to protect the collection of validators. These rules can be configured with the <code>allow_extra_fields</code> and <code>filter_extra_fields</code> options.</p>

<p>The <code>allow_extra_fields</code> option, which is set to <code>false</code> by default, checks that every user input data has a validator. If not, an "Extra field name." global error is thrown, as shown in the previous example. When developing, this allows developers to be warned if one forgets to explicitly validate a field.</p>

<p>Let's get back to the contact form. Let's change the validation rules by changing the <code>name</code> field into a mandatory field. Since the default value of the <code>required</code> option is <code>true</code>, we could change the <code>name</code> validator to:</p>

<pre class="php"><span class="re0">$nameValidator</span> = <span class="kw2">new</span> sfValidatorString<span class="br0">(</span><span class="br0">)</span>;</pre>

<p>This validator has no impact as it has neither a <code>min_length</code> nor a <code>max_length</code> option. In this case, we could also replace it with an empty validator:</p>

<pre class="php"><span class="re0">$nameValidator</span> = <span class="kw2">new</span> sfValidatorPass<span class="br0">(</span><span class="br0">)</span>;</pre>

<p>Instead of defining an empty validator, we could get rid of it, but the protection by default we previously went over prevents us from doing so. Listing 2-9 shows how to disable the protection using the <code>allow_extra_fields</code> option.</p>

<p class="figure">Listing 2-9 - Disable the <code>allow_extra_fields</code> Protection</p>

<pre class="php"><span class="kw2">class</span> ContactForm <span class="kw2">extends</span> sfForm
<span class="br0">{</span>
  <span class="kw2">public</span> <span class="kw2">function</span> configure<span class="br0">(</span><span class="br0">)</span>
  <span class="br0">{</span>
    <span class="co1">// ...</span>
&nbsp;
    <span class="re0">$this</span>-&gt;<span class="me1">setValidators</span><span class="br0">(</span><span class="kw3">array</span><span class="br0">(</span>
      <span class="st0">'email'</span>   =&gt; <span class="kw2">new</span> sfValidatorEmail<span class="br0">(</span><span class="br0">)</span>,
      <span class="st0">'subject'</span> =&gt; <span class="kw2">new</span> sfValidatorChoice<span class="br0">(</span><span class="kw3">array</span><span class="br0">(</span><span class="st0">'choices'</span> =&gt; <span class="kw3">array_keys</span><span class="br0">(</span>self::<span class="re0">$subjects</span><span class="br0">)</span><span class="br0">)</span><span class="br0">)</span>,
      <span class="st0">'message'</span> =&gt; <span class="kw2">new</span> sfValidatorString<span class="br0">(</span><span class="kw3">array</span><span class="br0">(</span><span class="st0">'min_length'</span> =&gt; <span class="nu0">4</span><span class="br0">)</span><span class="br0">)</span>,
    <span class="br0">)</span><span class="br0">)</span>;
&nbsp;
    <span class="re0">$this</span>-&gt;<span class="me1">validatorSchema</span>-&gt;<span class="me1">setOption</span><span class="br0">(</span><span class="st0">'allow_extra_fields'</span>, <span class="kw2">true</span><span class="br0">)</span>;
  <span class="br0">}</span>
<span class="br0">}</span></pre>

<p>You should now be able to validate the form as shown in Figure 2-9.</p>

<p class="figure">Figure 2-9 - Validating with <code>allow_extra_fields</code> set to <code>true</code></p>

<p><img src="./Chapter 2 - Form Validation (1_1) - Symfony_files/02_09.png" alt="Validating with &lt;code&gt;allow_extra_fields&lt;/code&gt; set to &lt;code&gt;true&lt;/code&gt;" title="Validating with &lt;code&gt;allow_extra_fields&lt;/code&gt; set to &lt;code&gt;true&lt;/code&gt;"></p>

<p>If you have a closer look, you will notice that even if the form is valid, the value of the <code>name</code> field is empty in the thank you page, despite any value that was submitted. In fact, the value wasn't even set in the array sent back by <code>$this-&gt;form-&gt;getValues()</code>. Disabling the <code>allow_extra_fields</code> option let us get rid of the error due to the lack of validator, but the <code>filter_extra_fields</code> option, which is set to <code>true</code> by default, filters those values, removing them from the validated values. It is of course possible to change this behavior, as shown in Listing 2-10.</p>

<p class="figure">Listing 2-10 - Disabling the <code>filter_extra_fields</code> protection</p>

<pre class="php"><span class="kw2">class</span> ContactForm <span class="kw2">extends</span> sfForm
<span class="br0">{</span>
  <span class="kw2">public</span> <span class="kw2">function</span> configure<span class="br0">(</span><span class="br0">)</span>
  <span class="br0">{</span>
    <span class="co1">// ...</span>
&nbsp;
    <span class="re0">$this</span>-&gt;<span class="me1">setValidators</span><span class="br0">(</span><span class="kw3">array</span><span class="br0">(</span>
      <span class="st0">'email'</span>   =&gt; <span class="kw2">new</span> sfValidatorEmail<span class="br0">(</span><span class="br0">)</span>,
      <span class="st0">'subject'</span> =&gt; <span class="kw2">new</span> sfValidatorChoice<span class="br0">(</span><span class="kw3">array</span><span class="br0">(</span><span class="st0">'choices'</span> =&gt; <span class="kw3">array_keys</span><span class="br0">(</span>self::<span class="re0">$subjects</span><span class="br0">)</span><span class="br0">)</span><span class="br0">)</span>,
      <span class="st0">'message'</span> =&gt; <span class="kw2">new</span> sfValidatorString<span class="br0">(</span><span class="kw3">array</span><span class="br0">(</span><span class="st0">'min_length'</span> =&gt; <span class="nu0">4</span><span class="br0">)</span><span class="br0">)</span>,
    <span class="br0">)</span><span class="br0">)</span>;
&nbsp;
    <span class="re0">$this</span>-&gt;<span class="me1">validatorSchema</span>-&gt;<span class="me1">setOption</span><span class="br0">(</span><span class="st0">'allow_extra_fields'</span>, <span class="kw2">true</span><span class="br0">)</span>;
    <span class="re0">$this</span>-&gt;<span class="me1">validatorSchema</span>-&gt;<span class="me1">setOption</span><span class="br0">(</span><span class="st0">'filter_extra_fields'</span>, <span class="kw2">false</span><span class="br0">)</span>;
  <span class="br0">}</span>
<span class="br0">}</span></pre>

<p>You should now be able to validate your form and retrieve the input value in the thank you page.</p>

<p>We will see in Chapter 4 that these protections can be used to safely serialize Propel objects from form values.</p>

<h2><a name="chapter_02_logical_validators">Logical Validators</a></h2>

<p>Several validators can be defined for a single field by using logical validators:</p>

<ul>
<li><p><code>sfValidatorAnd</code>: To be valid, the field must pass all validators</p></li>
<li><p><code>sfValidatorOr</code> : To be valid, the field must pass at least one validator</p></li>
</ul>

<p>The constructors of the logical operators take a list of validators as their first argument. Listing 2-11 uses the <code>sfValidatorAnd</code> to associate two required validators to the <code>name</code> field.</p>

<p class="figure">Listing 2-11 - Using the <code>sfValidatorAnd</code> validator</p>

<pre class="php"><span class="kw2">class</span> ContactForm <span class="kw2">extends</span> sfForm
<span class="br0">{</span>
 <span class="kw2">public</span> <span class="kw2">function</span> configure<span class="br0">(</span><span class="br0">)</span>
 <span class="br0">{</span>
    <span class="co1">// ...</span>
&nbsp;
    <span class="re0">$this</span>-&gt;<span class="me1">setValidators</span><span class="br0">(</span><span class="kw3">array</span><span class="br0">(</span>
      <span class="co1">// ...</span>
      <span class="st0">'name'</span> =&gt; <span class="kw2">new</span> sfValidatorAnd<span class="br0">(</span><span class="kw3">array</span><span class="br0">(</span>
        <span class="kw2">new</span> sfValidatorString<span class="br0">(</span><span class="kw3">array</span><span class="br0">(</span><span class="st0">'min_length'</span> =&gt; <span class="nu0">5</span><span class="br0">)</span><span class="br0">)</span>,
        <span class="kw2">new</span> sfValidatorRegex<span class="br0">(</span><span class="kw3">array</span><span class="br0">(</span><span class="st0">'pattern'</span> =&gt; <span class="st0">'/[<span class="es0">\w</span>- ]+/'</span><span class="br0">)</span><span class="br0">)</span>,
      <span class="br0">)</span><span class="br0">)</span>,
    <span class="br0">)</span><span class="br0">)</span>;
  <span class="br0">}</span>
<span class="br0">}</span></pre>

<p>When submitting the form, the <code>name</code> field input data must be made of at least five characters <strong>and</strong> match the regular expression (<code>[\w- ]+</code>).</p>

<p>As logical validators are validators themselves, they can be combined to define advanced logical expressions as shown in Listing 2-12.</p>

<p class="figure">Listing 2-12 - Combining several logical Operators</p>

<pre class="php"><span class="kw2">class</span> ContactForm <span class="kw2">extends</span> sfForm
<span class="br0">{</span>
 <span class="kw2">public</span> <span class="kw2">function</span> configure<span class="br0">(</span><span class="br0">)</span>
 <span class="br0">{</span>
    <span class="co1">// ...</span>
&nbsp;
    <span class="re0">$this</span>-&gt;<span class="me1">setValidators</span><span class="br0">(</span><span class="kw3">array</span><span class="br0">(</span>
      <span class="co1">// ...</span>
      <span class="st0">'name'</span> =&gt; <span class="kw2">new</span> sfValidatorOr<span class="br0">(</span><span class="kw3">array</span><span class="br0">(</span>
        <span class="kw2">new</span> sfValidatorAnd<span class="br0">(</span><span class="kw3">array</span><span class="br0">(</span>
          <span class="kw2">new</span> sfValidatorString<span class="br0">(</span><span class="kw3">array</span><span class="br0">(</span><span class="st0">'min_length'</span> =&gt; <span class="nu0">5</span><span class="br0">)</span><span class="br0">)</span>,
          <span class="kw2">new</span> sfValidatorRegex<span class="br0">(</span><span class="kw3">array</span><span class="br0">(</span><span class="st0">'pattern'</span> =&gt; <span class="st0">'/[<span class="es0">\w</span>- ]+/'</span><span class="br0">)</span><span class="br0">)</span>,
        <span class="br0">)</span><span class="br0">)</span>,
        <span class="kw2">new</span> sfValidatorEmail<span class="br0">(</span><span class="br0">)</span>,
      <span class="br0">)</span><span class="br0">)</span>,
    <span class="br0">)</span><span class="br0">)</span>;
  <span class="br0">}</span>
<span class="br0">}</span></pre>

<h2><a name="chapter_02_global_validators">Global Validators</a></h2>

<p>Each validator we went over so far are associated with a specific field and lets us validate only one value at a time. By default, they behave disregarding other data submitted by the user, but sometimes the validation of a field depends on the context or depends on many other field values. For example, a global validator is needed when two passwords must be the same, or when a start date must be before an end date.</p>

<p>In both of these cases, we must use a global validator to validate the input user data in their context. We can store a global validator before or after the individual field validation by using a pre-validator or a post-validator respectively. It is usually better to use a post-validator, because the data is already validated and cleaned, i.e. in a normalized format. Listing 2-13 shows how to implement the two passwords comparison using the <code>sfValidatorSchemaCompare</code> validator.</p>

<p class="figure">Listing 2-13 - Using the <code>sfValidatorSchemaCompare</code> Validator</p>

<pre class="php"><span class="re0">$this</span>-&gt;<span class="me1">validatorSchema</span>-&gt;<span class="me1">setPostValidator</span><span class="br0">(</span><span class="kw2">new</span> sfValidatorSchemaCompare<span class="br0">(</span><span class="st0">'password'</span>, sfValidatorSchemaCompare::<span class="me2">EQUAL</span>, <span class="st0">'password_again'</span><span class="br0">)</span><span class="br0">)</span>;</pre>

            <div class="admonition-wrapper">
                <div class="tip"></div>
                <div class="admonition admonition-tip">
                    <p class="first admonition-title">tip</p>
                    <p>
  The <code>sfValidatorSchemaCompare</code> class inherits from the <code>sfValidatorSchema</code> validator, like every global validator. <code>sfValidatorSchema</code> is itself a global validator since it validates the whole user input data, passing to other validators the validation of each field.</p>

                </div>
            </div>

<p>Listing 2-14 shows how to use a single validator to validate that a start date is before an end date, customizing the error message.</p>

<p class="figure">Listing 2-14 - Using the <code>sfValidatorSchemaCompare</code> Validator</p>

<pre class="php"><span class="re0">$this</span>-&gt;<span class="me1">validatorSchema</span>-&gt;<span class="me1">setPostValidator</span><span class="br0">(</span>
  <span class="kw2">new</span> sfValidatorSchemaCompare<span class="br0">(</span><span class="st0">'start_date'</span>, sfValidatorSchemaCompare::<span class="me2">LESS_THAN_EQUAL</span>, <span class="st0">'end_date'</span>,
    <span class="kw3">array</span><span class="br0">(</span><span class="br0">)</span>,
    <span class="kw3">array</span><span class="br0">(</span><span class="st0">'invalid'</span> =&gt; <span class="st0">'The start date ("%left_field%") must be before the end date ("%right_field%")'</span><span class="br0">)</span>
  <span class="br0">)</span>
<span class="br0">)</span>;</pre>

<p>Using a post-validator ensures that the comparison of the two dates will be accurate. Whatever date format was used for the input, the validation of the <code>start_date</code> and <code>end_date</code> fields will always be converted to values in a comparable format (<code>Y-m-d H:i:s</code> by default).</p>

<p>By default, pre-validators and post-validators return global errors to the form. Nevertheless, some of them can associate an error to a specific field. For instance, the <code>throw_global_error</code> option of the <code>sfValidatorSchemaCompare</code> validator can choose between a global error (Figure 2-10) or an error associated to the first field (Figure 2-11). Listing 2-15 shows how to use the <code>throw_global_error</code> option.</p>

<p class="figure">Listing 2-15 - Using the <code>throw_global_error</code> Option</p>

<pre class="php"><span class="re0">$this</span>-&gt;<span class="me1">validatorSchema</span>-&gt;<span class="me1">setPostValidator</span><span class="br0">(</span>
  <span class="kw2">new</span> sfValidatorSchemaCompare<span class="br0">(</span><span class="st0">'start_date'</span>, sfValidatorSchemaCompare::<span class="me2">LESS_THAN_EQUAL</span>, <span class="st0">'end_date'</span>,
    <span class="kw3">array</span><span class="br0">(</span><span class="st0">'throw_global_error'</span> =&gt; <span class="kw2">true</span><span class="br0">)</span>,
    <span class="kw3">array</span><span class="br0">(</span><span class="st0">'invalid'</span> =&gt; <span class="st0">'The start date ("%left_field%") must be before the end date ("%right_field%")'</span><span class="br0">)</span>
  <span class="br0">)</span>
<span class="br0">)</span>;</pre>

<p class="figure">Figure 2-10 - Global Error for a Global Validator</p>

<p><img src="./Chapter 2 - Form Validation (1_1) - Symfony_files/02_10.png" alt="Global Error for a global Validator" title="Global Error for a Global Validator"></p>

<p class="figure">Figure 2-11 - Local Error for a Global Validator</p>

<p><img src="./Chapter 2 - Form Validation (1_1) - Symfony_files/02_11.png" alt="Local Error for a global Validator" title="Local Error for a Global Validator"></p>

<p>At last, using a logical validator allows you to combine several post-validators as shown Listing 2-16.</p>

<p class="figure">Listing 2-16 - Combining several Post-Validators with a logical Validator</p>

<pre class="php"><span class="re0">$this</span>-&gt;<span class="me1">validatorSchema</span>-&gt;<span class="me1">setPostValidator</span><span class="br0">(</span><span class="kw2">new</span> sfValidatorAnd<span class="br0">(</span><span class="kw3">array</span><span class="br0">(</span>
  <span class="kw2">new</span> sfValidatorSchemaCompare<span class="br0">(</span><span class="st0">'start_date'</span>, sfValidatorSchemaCompare::<span class="me2">LESS_THAN_EQUAL</span>, <span class="st0">'end_date'</span><span class="br0">)</span>,
  <span class="kw2">new</span> sfValidatorSchemaCompare<span class="br0">(</span><span class="st0">'password'</span>, sfValidatorSchemaCompare::<span class="me2">EQUAL</span>, <span class="st0">'password_again'</span><span class="br0">)</span>,
<span class="br0">)</span><span class="br0">)</span><span class="br0">)</span>;</pre>

<h2><a name="chapter_02_file_upload">File Upload</a></h2>

<p>Dealing with file uploads in PHP, like in every web oriented language, involves 
handling both HTML code and server-side file retrieving. In this section we will
see the tools the form framework has to offer to the developer to make their 
life easier. We will also see how to avoid falling into common traps.</p>

<p>Let's change the contact form to allow the attaching of a file to 
the message. To do this, we will add a <code>file</code> field as shown in Listing 2-17.</p>

<p class="figure">Listing 2-17 - Adding a <code>file</code> Field to the <code>ContactForm</code> form</p>

<pre class="php"><span class="co1">// lib/form/ContactForm.class.php</span>
<span class="kw2">class</span> ContactForm <span class="kw2">extends</span> sfForm
<span class="br0">{</span>
  protected <span class="kw3">static</span> <span class="re0">$subjects</span> = <span class="kw3">array</span><span class="br0">(</span><span class="st0">'Subject A'</span>, <span class="st0">'Subject B'</span>, <span class="st0">'Subject C'</span><span class="br0">)</span>;
&nbsp;
  <span class="kw2">public</span> <span class="kw2">function</span> configure<span class="br0">(</span><span class="br0">)</span>
  <span class="br0">{</span>
    <span class="re0">$this</span>-&gt;<span class="me1">setWidgets</span><span class="br0">(</span><span class="kw3">array</span><span class="br0">(</span>
      <span class="st0">'name'</span>    =&gt; <span class="kw2">new</span> sfWidgetFormInput<span class="br0">(</span><span class="br0">)</span>,
      <span class="st0">'email'</span>   =&gt; <span class="kw2">new</span> sfWidgetFormInput<span class="br0">(</span><span class="br0">)</span>,
      <span class="st0">'subject'</span> =&gt; <span class="kw2">new</span> sfWidgetFormSelect<span class="br0">(</span><span class="kw3">array</span><span class="br0">(</span><span class="st0">'choices'</span> =&gt; self::<span class="re0">$subjects</span><span class="br0">)</span><span class="br0">)</span>,
      <span class="st0">'message'</span> =&gt; <span class="kw2">new</span> sfWidgetFormTextarea<span class="br0">(</span><span class="br0">)</span>,
      <span class="st0">'file'</span>    =&gt; <span class="kw2">new</span> sfWidgetFormInputFile<span class="br0">(</span><span class="br0">)</span>,
    <span class="br0">)</span><span class="br0">)</span>;
    <span class="re0">$this</span>-&gt;<span class="me1">widgetSchema</span>-&gt;<span class="me1">setNameFormat</span><span class="br0">(</span><span class="st0">'contact[%s]'</span><span class="br0">)</span>;
&nbsp;
    <span class="re0">$this</span>-&gt;<span class="me1">setValidators</span><span class="br0">(</span><span class="kw3">array</span><span class="br0">(</span>
      <span class="st0">'name'</span>    =&gt; <span class="kw2">new</span> sfValidatorString<span class="br0">(</span><span class="kw3">array</span><span class="br0">(</span><span class="st0">'required'</span> =&gt; <span class="kw2">false</span><span class="br0">)</span><span class="br0">)</span>,
      <span class="st0">'email'</span>   =&gt; <span class="kw2">new</span> sfValidatorEmail<span class="br0">(</span><span class="br0">)</span>,
      <span class="st0">'subject'</span> =&gt; <span class="kw2">new</span> sfValidatorChoice<span class="br0">(</span><span class="kw3">array</span><span class="br0">(</span><span class="st0">'choices'</span> =&gt; <span class="kw3">array_keys</span><span class="br0">(</span>self::<span class="re0">$subjects</span><span class="br0">)</span><span class="br0">)</span><span class="br0">)</span>,
      <span class="st0">'message'</span> =&gt; <span class="kw2">new</span> sfValidatorString<span class="br0">(</span><span class="kw3">array</span><span class="br0">(</span><span class="st0">'min_length'</span> =&gt; <span class="nu0">4</span><span class="br0">)</span><span class="br0">)</span>,
      <span class="st0">'file'</span>    =&gt; <span class="kw2">new</span> sfValidatorFile<span class="br0">(</span><span class="br0">)</span>,
    <span class="br0">)</span><span class="br0">)</span>;
  <span class="br0">}</span>
<span class="br0">}</span></pre>

<p>When there is a <code>sfWidgetFormInputFile</code> widget in a form allowing to upload a file, we must also add an <code>enctype</code> attribute to the <code>form</code> tag as shown in Listing 2-18.</p>

<p class="figure">Listing 2-18 - Modifying the Template to take the <code>file</code> Field into account</p>

<pre class="php">&lt;form action=<span class="st0">"&lt;?php echo url_for('contact/index') ?&gt;"</span> method=<span class="st0">"POST"</span> enctype=<span class="st0">"multipart/form-data"</span>&gt;
  &lt;table&gt;
    <span class="kw2">&lt;?php</span> <span class="kw3">echo</span> <span class="re0">$form</span> <span class="kw2">?&gt;</span>
    &lt;tr&gt;
      &lt;td colspan=<span class="st0">"2"</span>&gt;
        &lt;input type=<span class="st0">"submit"</span> /&gt;
      &lt;/td&gt;
    &lt;/tr&gt;
  &lt;/table&gt;
&lt;/form&gt;</pre>

            <div class="admonition-wrapper">
                <div class="note"></div>
                <div class="admonition admonition-note">
                    <p class="first admonition-title">note</p>
                    <p>
  If you dynamically generate the template associated to a form, the <code>isMultipart()</code> method of the form object return <code>true</code>, if it needs the <code>enctype</code> attribute.</p>

                </div>
            </div>

<p>Information about uploaded files are not stored with the other submitted values in PHP. It is then necessary to modify the call to the <code>bind()</code> method to pass on this information as a second argument, as shown in Listing 2-19.</p>

<p class="figure">Listing 2-19 - Passing uploaded Files to the <code>bind()</code> Method</p>

<pre class="php"><span class="kw2">class</span> contactActions <span class="kw2">extends</span> sfActions
<span class="br0">{</span>
  <span class="kw2">public</span> <span class="kw2">function</span> executeIndex<span class="br0">(</span><span class="re0">$request</span><span class="br0">)</span>
  <span class="br0">{</span>
    <span class="re0">$this</span>-&gt;<span class="me1">form</span> = <span class="kw2">new</span> ContactForm<span class="br0">(</span><span class="br0">)</span>;
&nbsp;
    <span class="kw1">if</span> <span class="br0">(</span><span class="re0">$request</span>-&gt;<span class="me1">isMethod</span><span class="br0">(</span><span class="st0">'post'</span><span class="br0">)</span><span class="br0">)</span>
    <span class="br0">{</span>
      <span class="re0">$this</span>-&gt;<span class="me1">form</span>-&gt;<span class="me1">bind</span><span class="br0">(</span><span class="re0">$request</span>-&gt;<span class="me1">getParameter</span><span class="br0">(</span><span class="st0">'contact'</span><span class="br0">)</span>, <span class="re0">$request</span>-&gt;<span class="me1">getFiles</span><span class="br0">(</span><span class="st0">'contact'</span><span class="br0">)</span><span class="br0">)</span>;
      <span class="kw1">if</span> <span class="br0">(</span><span class="re0">$this</span>-&gt;<span class="me1">form</span>-&gt;<span class="me1">isValid</span><span class="br0">(</span><span class="br0">)</span><span class="br0">)</span>
      <span class="br0">{</span>
        <span class="re0">$values</span> = <span class="re0">$this</span>-&gt;<span class="me1">form</span>-&gt;<span class="me1">getValues</span><span class="br0">(</span><span class="br0">)</span>;
        <span class="co1">// do something with the values</span>
&nbsp;
        <span class="co1">// ...</span>
      <span class="br0">}</span>
    <span class="br0">}</span>
  <span class="br0">}</span>
&nbsp;
  <span class="kw2">public</span> <span class="kw2">function</span> executeThankyou<span class="br0">(</span><span class="br0">)</span>
  <span class="br0">{</span>
  <span class="br0">}</span>
<span class="br0">}</span></pre>

<p>Now that the form is fully operational, we still need to change the action in order to store the uploaded file on disk. As we observed at the beginning of this chapter, the <code>sfValidatorFile</code> converts the information related to the uploaded file to a <code>sfValidatedFile</code> object. Listing 2-20 shows how to handle this object to store the file in the <code>web/uploads</code> directory.</p>

<p class="figure">Listing 2-20 - Using the <code>sfValidatedFile</code> Object</p>

<pre class="php"><span class="kw1">if</span> <span class="br0">(</span><span class="re0">$this</span>-&gt;<span class="me1">form</span>-&gt;<span class="me1">isValid</span><span class="br0">(</span><span class="br0">)</span><span class="br0">)</span>
<span class="br0">{</span>
  <span class="re0">$file</span> = <span class="re0">$this</span>-&gt;<span class="me1">form</span>-&gt;<span class="me1">getValue</span><span class="br0">(</span><span class="st0">'file'</span><span class="br0">)</span>;
&nbsp;
  <span class="re0">$filename</span> = <span class="st0">'uploaded_'</span>.<span class="kw3">sha1</span><span class="br0">(</span><span class="re0">$file</span>-&gt;<span class="me1">getOriginalName</span><span class="br0">(</span><span class="br0">)</span><span class="br0">)</span>;
  <span class="re0">$extension</span> = <span class="re0">$file</span>-&gt;<span class="me1">getExtension</span><span class="br0">(</span><span class="re0">$file</span>-&gt;<span class="me1">getOriginalExtension</span><span class="br0">(</span><span class="br0">)</span><span class="br0">)</span>;
  <span class="re0">$file</span>-&gt;<span class="me1">save</span><span class="br0">(</span>sfConfig::<span class="me2">get</span><span class="br0">(</span><span class="st0">'sf_upload_dir'</span><span class="br0">)</span>.<span class="st0">'/'</span>.<span class="re0">$filename</span>.<span class="re0">$extension</span><span class="br0">)</span>;
&nbsp;
  <span class="co1">// ...</span>
<span class="br0">}</span></pre>

<p>The following table lists all the <code>sfValidatedFile</code> object methods:</p>

<table cellspacing="0" class="doc_table">
<thead>
<tr>
  <th><strong>Method</strong></th>
  <th><strong>Description</strong></th>
</tr>
</thead>
<tbody>
<tr>
  <td>save()</td>
  <td>Saves the uploaded file</td>
</tr>
<tr>
  <td>isSaved()</td>
  <td>Returns <code>true</code> if the file has been saved</td>
</tr>
<tr>
  <td>getSavedName()</td>
  <td>Returns the name of the saved file</td>
</tr>
<tr>
  <td>getExtension()</td>
  <td>Returns the extension of the file, according to the mime type</td>
</tr>
<tr>
  <td>getOriginalName()</td>
  <td>Returns the name of the uploaded file</td>
</tr>
<tr>
  <td>getOriginalExtension()</td>
  <td>Returns the extension of the uploaded file name</td>
</tr>
<tr>
  <td>getTempName()</td>
  <td>Returns the path of the temporary file</td>
</tr>
<tr>
  <td>getType()</td>
  <td>Returns the mime type of the file</td>
</tr>
<tr>
  <td>getSize()</td>
  <td>Returns the size of the file</td>
</tr>
</tbody>
</table>

            <div class="admonition-wrapper">
                <div class="tip"></div>
                <div class="admonition admonition-tip">
                    <p class="first admonition-title">tip</p>
                    <p>
  The mime type provided by the browser during the file upload is not reliable. In order to ensure maximum security, the functions <code>finfo_open</code> and <code>mime_content_type</code>, and the <code>file</code> tool are used in turn during the file validation. As a last resort, if any of the functions can not guess the mime type, or if the system does not provide them, the browser mime type is taken into account. To add or change the functions that guess the mime type, just pass the <code>mime_type_guessers</code> option to the <code>sfValidatorFile</code> constructor.</p>

                </div>
            </div>

            </div>

            <div class="navigation">
                            <a accesskey="P" title="Chapter 1 - Form Creation" href="http://symfony.com/legacy/doc/forms/1_1/en/01-Form-Creation">
                    «&nbsp;Chapter 1 - Form Creation
                </a>
                        <span class="separator">|</span>                            <a accesskey="N" title="Chapter 3 - Forms for Web Designers" href="http://symfony.com/legacy/doc/forms/1_1/en/03-Forms-for-web-Designers">
                    Chapter 3 - Forms for Web Designers&nbsp;»
                </a>
                    </div>

            <div class="box_hr"><hr></div>

                                                                                </div>
                                                            </div>
                        

                        
                                                    <div class="box_relative_content">
    <div class="relative_content_box_columns clear_fix">
        <div class="column_01">
            <h2 class="title_05">News from the Symfony blog</h2>

<ul class="event_list">
            <li>
            <h3>
                <a href="http://symfony.com/blog/a-week-of-symfony-406-06-12-october-2014">
                    A week of symfony #406 (06-&gt;12 October 2014)
                    <span class="place_date">October 12, 2014</span>
                </a>
            </h3>
        </li>
            <li>
            <h3>
                <a href="http://symfony.com/blog/introducing-the-official-symfony-best-practices">
                    Introducing the Official Symfony Best Practices
                    <span class="place_date">October 09, 2014</span>
                </a>
            </h3>
        </li>
    </ul>

<div class="read-more link_01">
    <a href="http://symfony.com/blog/">Visit The Symfony Blog</a>
</div>

        </div>

        <div class="column_02">
                        <h2 class="title_05">In the news</h2>


<div class="upcoming_event clear_fix">
    <div>
        <a href="http://sensiolabs.com/en/symfony/certification.html" target="_blank">
            <img style="width: 100px" src="./Chapter 2 - Form Validation (1_1) - Symfony_files/certification-big.png" class="png_fix" alt="The Symfony Certification by SensioLabs">
        </a>
    </div>

    <div style="margin-top: 13px">
        <h3 style="font-size: 13px; font-family: &#39;Lucida Sans Unicode&#39;, &#39;Lucida Grande&#39;, Verdana, Arial, Helvetica, sans-serif">Symfony Certification: Now in 4,000 centers around the world!</h3>
        <div style="margin-top: 5px">
            <a href="http://sensiolabs.com/en/symfony/certification/order" class="non_extensible_button button_01">    <span class="border_l png_fix">
        <span class="border_r png_fix">
            <span class="btn_bg png_fix">
                GET CERTIFIED
            </span>
        </span>
    </span>
</a>
        </div>
    </div>
</div>


                    </div>

        <div class="column_03">
            <h2 class="title_05">Upcoming training sessions</h2>

<ul class="event_list">
        <li>
        <a href="http://training.sensiolabs.com/en/training/courses?search_training%5Blevel%5D%5B0%5D=beginner&search_training%5Bduration%5D=1&search_training%5BavailableLanguages%5D%5B0%5D=fr&search_training%5Bkeywords%5D=Ma%C3%AEtrise+de+la+POO+avec+PHP+et+les+Composants+Symfony2&search_training%5Bfrom%5D=10%2F13%2F2014&search_training%5Bto%5D=10%2F17%2F2014">
            Mastering OOP with PHP and the Symfony2 Components
            <br>
            <span class="place_date">Clichy - 2014-10-13</span>
        </a>
    </li>
        <li>
        <a href="http://training.sensiolabs.com/en/training/courses?search_training%5Blevel%5D%5B0%5D=beginner&search_training%5Bduration%5D=1&search_training%5BavailableLanguages%5D%5B0%5D=fr&search_training%5BavailableLanguages%5D%5B1%5D=en&search_training%5Bkeywords%5D=D%C3%A9veloppement+web+avec+les+composants+Symfony2&search_training%5Bfrom%5D=10%2F15%2F2014&search_training%5Bto%5D=10%2F17%2F2014">
            Web Development with the Symfony2 Components
            <br>
            <span class="place_date">Clichy - 2014-10-15</span>
        </a>
    </li>
        <li>
        <a href="http://training.sensiolabs.com/en/training/courses?search_training%5Blevel%5D%5B0%5D=intermediate&search_training%5Bduration%5D=1&search_training%5BavailableLanguages%5D%5B0%5D=fr&search_training%5BavailableLanguages%5D%5B1%5D=en&search_training%5BavailableLanguages%5D%5B2%5D=de&search_training%5BavailableLanguages%5D%5B3%5D=es&search_training%5Bkeywords%5D=Ma%C3%AEtrise+de+Symfony2&search_training%5Bfrom%5D=10%2F16%2F2014&search_training%5Bto%5D=10%2F17%2F2014">
            Mastering Symfony2
            <br>
            <span class="place_date">Paris - 2014-10-16</span>
        </a>
    </li>
    </ul>

<div class="link_01">
    <a href="http://trainings.sensiolabs.com/" class="png_fix">View all sessions</a>
</div>

        </div>
    </div>
</div>

                        
                    </div>
                            </div>

            
<div class="footer">
    <div class="content">
        <h2 class="title_02">
            <img src="./Chapter 2 - Form Validation (1_1) - Symfony_files/logo_sf.png" alt="sf - Symfony" class="illustration_logo_footer png_fix"> is a trademark of Fabien Potencier. All rights reserved.
        </h2>

        <div class="box_menu_footer clear_fix">
            <div class="menu_footer first">
                <h3 class="title_03"><a href="http://symfony.com/what-is-symfony">What is Symfony?</a></h3>
                <ul class="list_menu_footer">
                        <li>
                            
        <a href="http://symfony.com/at-a-glance">
            Symfony at a Glance
        </a>

                    </li>
    <li>
                            
        <a href="http://symfony.com/in-five-minutes">
            Symfony in 5 Minutes
        </a>

                    </li>
    <li>
                            
        <a href="http://symfony.com/elevator-pitches">
            Elevator Pitches
        </a>

                    </li>
    <li>
                            
        <a href="http://symfony.com/blog/category/case-studies">
            Case Studies
        </a>

                    </li>
    <li>
                            
        <a href="http://symfony.com/doc/current/contributing/community/releases.html">
            Versioning Policy
        </a>

                    </li>
    <li>
                            
        <a href="http://symfony.com/doc/current/contributing/community/releases.html#long-term-support-versions">
            Long Term Support
        </a>

                    </li>
    <li>
                            
        <a href="http://symfony.com/doc/current/contributing/code/security.html">
            Security Policy
        </a>

                    </li>
    <li>
                            
        <a href="http://symfony.com/doc/current/contributing/code/license.html">
            License
        </a>

                    </li>

                </ul>
            </div>

            <div class="menu_footer">
                <h3 class="title_03"><a href="http://symfony.com/get-started">Get Started</a></h3>
                <ul class="list_menu_footer">
                        <li>
                            
        <a href="http://symfony.com/download">
            Download Symfony
        </a>

                    </li>
    <li>
                            
        <a href="http://symfony.com/distributions">
            Symfony Distributions
        </a>

                    </li>
    <li>
                            
        <a href="http://symfony.com/components">
            Symfony Components
        </a>

                    </li>
    <li>
                            
        <a href="http://symfony.com/projects">
            Projects using Symfony
        </a>

                    </li>
    <li>
                            
        <a href="http://symfony.com/doc/current/quick_tour/the_big_picture.html">
            Quick Tour
        </a>

                    </li>
    <li>
                            
        <a href="http://symfony.com/legacy">
            symfony1 Legacy
        </a>

                    </li>

                </ul>
            </div>

            <div class="menu_footer">
                <h3 class="title_03"><a href="http://symfony.com/doc/current/index.html">Learn Symfony</a></h3>
                <ul class="list_menu_footer">
                    
<li class="first">
    <a href="http://symfony.com/doc/current/book/index.html">
        The Book
    </a>
</li>
<li>
    <a href="http://symfony.com/doc/current/cookbook/index.html">
        The Cookbook
    </a>
</li>
<li>
    <a href="http://symfony.com/doc/current/components/index.html">
        The Components
    </a>
</li>
<li>
    <a href="http://symfony.com/doc/current/reference/index.html">
        Reference
    </a>
</li>
<li>
    <a href="http://symfony.com/doc/current/bundles/index.html">
        Bundles
    </a>
</li>
<li>
    <a href="http://symfony.com/doc/master/cmf/index.html">
        Symfony CMF
    </a>
</li>
<li>
    <a href="http://symfony.com/doc/current/genindex.html">
        Index
    </a>
</li>
<li>
    <a href="http://symfony.com/doc/current/contributing/index.html">
        Contributing
    </a>
</li>
<li>
    <a href="http://symfony.com/legacy/doc">
        Docs for symfony 1.x
    </a>
</li>
<li>
    <a href="http://trainings.sensiolabs.com/">
        Trainings
    </a>
</li>
                </ul>
            </div>

            <div class="menu_footer">

                <h3 class="title_03"><a href="http://symfony.com/community">Community</a></h3>
                <ul class="list_menu_footer">
                        <li>
                            
        <a href="https://connect.sensiolabs.com/">
            SensioLabs Connect
        </a>

                    </li>
    <li>
                            
        <a href="http://symfony.com/irc">
            IRC Channel
        </a>

                    </li>
    <li>
                            
        <a href="http://symfony.com/mailing-lists">
            Mailing Lists
        </a>

                    </li>
    <li>
                            
        <a href="http://forum.symfony-project.org/">
            Forum
        </a>

                    </li>
    <li>
                            
        <a href="http://symfony.com/doc/current/contributing/index.html">
            How to be Involved
        </a>

                    </li>
    <li>
                            
        <a href="http://symfony.com/stats/code">
            Code Stats
        </a>

                    </li>

                </ul>

                <h3 class="title_03"><a href="http://symfony.com/blog/">Blog</a></h3>
                <ul class="list_menu_footer">
                    
    <li><a href="http://symfony.com/blog/category/a-week-of-symfony">A week of symfony</a></li>
    <li><a href="http://symfony.com/blog/category/case-studies">Case studies</a></li>
    <li><a href="http://symfony.com/blog/category/community">Community</a></li>
    <li><a href="http://symfony.com/blog/category/documentation">Documentation</a></li>
    <li><a href="http://symfony.com/blog/category/living-on-the-edge">Living on the edge</a></li>
    <li><a href="http://symfony.com/blog/category/releases">Releases</a></li>
    <li><a href="http://symfony.com/blog/category/security-advisories">Security Advisories</a></li>
    <li><a href="http://symfony.com/blog/category/symfony-cmf">Symfony CMF</a></li>

<li><a href="http://symfony.com/events/"><em>Community Events</em></a></li>
                </ul>
            </div>

            <div class="menu_footer">
                <h3 class="title_03"><a href="http://symfony.com/services">Services</a></h3>
                <ul class="list_menu_footer">
                    <li><a href="http://symfony.com/services/list">Our services</a></li>
<li><a href="http://trainings.sensiolabs.com/en">Train developers</a></li>
<li><a href="http://symfony.com/services/guide#before">Start a project</a></li>
<li><a href="http://insight.sensiolabs.com/">Manage your project quality</a></li>
<li><a href="http://symfony.com/services/guide#during">Struggling with your project</a></li>
<li><a href="http://sensiolabs.com/en/support/sensiolabs_support.html">Support</a></li>
<li><a href="http://symfony.com/services/request">Contact us</a></li>
                </ul>
            </div>

            <div class="menu_footer">
                <h3 class="title_03"><a href="http://symfony.com/about">About</a></h3>
                <ul class="list_menu_footer">
                        <li>
                            
        <a href="http://sensiolabs.com/recrutement/rejoignez_nous.html">
            SensioLabs
        </a>

                    </li>
    <li>
                            
        <a href="http://symfony.com/contributors">
            Contributors
        </a>

                    </li>
    <li>
                            
        <a href="http://symfony.com/roadmap">
            Roadmap
        </a>

                    </li>
    <li>
                            
        <a href="http://symfony.com/trademark">
            Trademark &amp; Logo Policy
        </a>

                    </li>
    <li>
                            
        <a href="http://symfony.com/logo">
            Logo
        </a>

                    </li>
    <li>
                            
        <a href="http://sensiolabs.com/recrutement/rejoignez_nous.html">
            Jobs
        </a>

                    </li>

                </ul>
            </div>
        </div>
    </div>
</div>
        </div>

                        <script language="javascript">
    var tCdata = tCdata || {};
    tCdata.cs = '1288';
    tCdata.data = tCdata.data || {};
    tCdata.data.page_type = "Consultation";
    tCdata.data.id_item = "sensiolabs";
    tCdata.data.value = "1";
    (function () {
        var tc_tedemis = document.createElement('script');
        tc_tedemis.type = 'text/javascript';
        tc_tedemis.async = true;
        tc_tedemis.src = '//cdn.tagcommander.com/dms/tedemis_dms.js';
        document.body.appendChild(tc_tedemis);
    })();
</script><script type="text/javascript" async="" src="./Chapter 2 - Form Validation (1_1) - Symfony_files/tedemis_dms.js"></script>
<script type="text/javascript" src="./Chapter 2 - Form Validation (1_1) - Symfony_files/ld.js" async="true"></script>
<script type="text/javascript">
    window.criteo_q = window.criteo_q || [];
    window.criteo_q.push (
        { event: "setAccount", account: 14086 },
        { event: "viewHome"}
    );
</script>


        <script type="text/javascript">
            $(document).ready(function () {
                (function(w, d, s) {
                    function go() {
                        var js, fjs = d.getElementsByTagName(s)[0], load = function(url, id) {
                            if (d.getElementById(id)) {return;}
                            js = d.createElement(s); js.src = url; js.id = id;
                            fjs.parentNode.insertBefore(js, fjs);
                        };
                        load('https://connect.sensiolabs.com/sln.js?customize_url=http://symfony.com/sln_customiser.js', 'sln_bar');
                    }
                    if (w.addEventListener) { w.addEventListener("load", go, false); }
                    else if (w.attachEvent) { w.attachEvent("onload",go); }
                } (window, document, 'script'));

               (function () {
                   var s = document.createElement('link');
                   s.rel = 'stylesheet';
                   s.href = 'https://connect.sensiolabs.com/css/sln.css';
                   var x = document.getElementsByTagName('title')[0];
                   x.parentNode.insertBefore(s, x);
               })();
           });
       </script>
    <script type="text/javascript">window.NREUM||(NREUM={});NREUM.info={"beacon":"beacon-4.newrelic.com","licenseKey":"b10765e88c","applicationID":"3535762","transactionName":"ZVVSYEdRWkACVEJRC1wfcVdBWVtdTGRTVhdbX2NNWFZbXRpgU1oXW0RVdllfU3EWWVJUAQhyXFtSCllWDUI=","queueTime":0,"applicationTime":289,"ttGuid":"","agentToken":"","userAttributes":"","errorBeacon":"bam.nr-data.net","agent":"js-agent.newrelic.com\/nr-460.min.js"}</script>

<img width="1" height="1" border="0" src="./Chapter 2 - Form Validation (1_1) - Symfony_files/saved_resource"><div id="criteo-tags-div" style="display: none;"><iframe height="0" width="0" src="./Chapter 2 - Form Validation (1_1) - Symfony_files/dis(1).html" style="display: none;"></iframe><script async="true" type="text/javascript" src="./Chapter 2 - Form Validation (1_1) - Symfony_files/event"></script><iframe height="0" width="0" src="./Chapter 2 - Form Validation (1_1) - Symfony_files/dis.html" style="display: none;"></iframe></div><script src="./Chapter 2 - Form Validation (1_1) - Symfony_files/nr-460.min.js"></script><script type="text/javascript" src="./Chapter 2 - Form Validation (1_1) - Symfony_files/b10765e88c"></script><ul class="ui-autocomplete ui-menu ui-widget ui-widget-content ui-corner-all" role="listbox" aria-activedescendant="ui-active-menuitem" style="z-index: 9001; top: 0px; left: 0px; display: none;"></ul></body></html>